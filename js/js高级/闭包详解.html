<!DOCTYPE html>
<html>
<head>
	<title>闭包详解</title>
	<style type="text/css">
		.item {
			width: 100px;
			height: 100px;
		}
	</style>
</head>
<body>
	<div>
		<div class="item">0</div>
		<div class="item">1</div>
		<div class="item">2</div>
		<div class="item">3</div>
		<div class="item">4</div>
		<div class="item">5</div>
		<div class="item">6</div>
	</div>
	<script type="text/javascript">
		/** 闭包函数详解:
			= 一个可以操作私有变量的函数就叫做闭包函数

			使用闭包的优点:
				实现了数据的私有化, 增强数据的安全性
					- 用户无法做出修改

			- 不要滥用闭包函数		
				- 普通函数每次调用是不相关联的, 当某个函数调用完毕后, 作用域会被销毁, 内部的变量和函数都被销毁
				- 当我们使用闭包函数时, 由于私有变量可以被外界进行持续的操作, 这个私有变量在函数调用完毕也不会进行销毁, 因此会造成内存泄露问题

		 */
		let items = document.querySelectorAll('.item');

		for(var i = 0; i < items.length; i++) {
			(function fun(i) {
				items[i].onclick = function () {
					console.log(i)
				}
			})(i);
		}
	</script>
</body>
</html>